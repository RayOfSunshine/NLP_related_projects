# 食物营养图谱综述

***

## 知识图谱简介

知识图谱（ Knowledge Graph）是自然语言处理（Nature Language Process）当中常见并广泛应用在各大企业的一种知识库技术，它以结构化的形式描述真实世界中的概念、专业实体（Entity）及实体间的关系（Relation），便于计算设备更好的计算和理解企业数据中的海量信息。通常结构化的知识是以图形式进行表示，图的顶点（Vertex）表示语义符号实体，图的边（Edge）表示符号之间的语义关系，此外更复杂的知识图谱在每个顶点和边上还存在更丰富的信息来描述对应的实体和边，这些信息所属的信息类型就称之为属性名，具体的信息内容就称之为属性值。

知识图谱所涵盖的数据规模通常也是相对较大的，很多企业会选择将大部分业务数据通过特征抽取的方式存放于知识图谱之中。一个含有一定规模，顶点类型与边类型数量较多，且顶点（边）所含属性数量也较多的图通常称之为多元异构多属性的图。

知识图谱的构建，需要一定规模的数据，包含大量的顶点及边数据，甚至他们的属性数据。而数据的收集也会涉及到很多自然语言处理的基本技术。常见的构建方式为，从实体识别，关系抽取，到顶点与边的数据整合，再到图数据库的选型与部署，最终形成能够可视化管理的知识图谱。

知识图谱如今已被广泛的应用于语义搜索，智能问答，个性化推荐，辅助决策，金融安全等多个方向与领域。

***

## 薄荷食物营养知识图谱的组成部分

基于以上知识图谱的基本信息，经薄荷健康技术部门的研究与实践，薄荷食物营养知识图谱（以下简称为食物营养图谱）完成了搭建工作，并成功应用于智能问答等业务方向。相比于常见的知识图谱，食物营养图谱主要面向食物与营养数据进行整合与存储，目的在于针对特定疾病与人群的情况给出符合营养学的膳食建议。一下主要介绍食物营养图谱的组成部分：

当前食物营养图谱包含的顶点类型有如下几种，分别是食物（food）顶点，基础食材（raw_food）顶点，食物类型（food_category）顶点，营养素（nutrient）顶点，疾病（disease）顶点，症状（symptom）顶点，人群（crowd）顶点，运动（sport）顶点，饮食模式（eaten pattern）顶点，生活习惯（life habit）顶点，其中食物包含薄荷食物库中的核心食物，即在普通菜市场能够见到买到，营养价值较高的食物；基础食材表示组成这些食物的基础食物；食物类型表示从用途，食物源，食物形态上进行分类的结果。为了能够给出在特定场景下的膳食建议，食物营养图谱中的顶点可以分为两类，一类是与膳食相关的推荐对象，如食物，基础食材，食物类型与营养素等，同时疾病，症状，人群作为特定场景与情形作为提供膳食指南的依据，成为另外一类顶点。

对于食物营养图谱中的边，根据膳食建议的逻辑，大多数边都被定义为第一类推荐对象与第二类场景对象的关系。举例来说，第一类推荐对象中的某一类食物可能对特定疾病，症状或是人群有着有益（无益）的作用，那么我们就会分别在这类食物与特定疾病，特定症状，特定人群之间各连一条边，于是具有一定膳食建议的三条边就完成了。同样的道理，除上述食物顶点之外，任意一个顶点如基础食材，食物类别，营养素与特定的疾病，症状，人群都有可能存在一定的关系。如果该关系是正向的，即有益的，则这种边会被定义为有益（Positive）；如果这种关系是负向的，即无益的，则这种边会被定义为无益（Negative）；如果已知数据中没有推荐对象与场景对象的关系，则不存在相关边。

***

## 食物营养图谱的构建方法

构建知识图谱的过程本质上就是知识抽取的过程。其难点在于，如果没有整理好的结构化的数据，图谱中依赖顶点和边，也就是知识抽取中的实体和实体关系，就需要一些自然语言处理的技术模型来抽取了。很多膳食相关文章（在自然语言处理中，这类的文字称之为原始文本，之后都使用原始文本进行描述）中都会包含一些食物与特定场景和条件下的关系，比如含糖较高的食物与糖尿病的关系，于是如何从原始文本中获取实体及其关系就变成了需要的解决的问题。

在自然语言处理中有实体识别，关系抽取等常见文本建模任务能够被用来识别原始文本中的实体和关系。在实体识别阶段，我们使用相对常用的双向长短时记忆循环神经网络与条件随机场组合建模的方式，根据每个字在句子中的实体标注信息（是否属于一个实体，如果是，这个字是实体头还是非头的实体中间部分），训练实体识别模型。训练完成后，模型可以通过输入一个句子，根据学习好的参数，能够直接识别出输入的句子中存在的实体文本，如食物，疾病等；

当我们已知一个句子中存在哪些实体时，下一步就是训练一个关系抽取模型。分别选取实体在句中的位置和句子文本本身组合特征表示，然后对这类特征表示进行建模。 模型首先使用双向长短时记忆循环神经网络搭配字级别的注意力机制作为一个模块，并将这个模块作为处理组合特征的第一层。在此基础之上构建句子级别的注意力机制计算一对实体的关系属于正负关系的哪一种的概率更大，概率大关系的就作为一对实体在原始文本中表现的语义关系。

除去能够从原始文本中获得的特定场景下的有关膳食建议的实体和关系，对于非膳食语义关系的实体及实体关系，如基础食材与食物的组成关系，营养素与食物的富含关系等，我们选取包含这些数据的网站进行爬虫，而后人工整理的方式进行完善和补充。

当然，对于某些不能从外部原始文本中进行抽取的数据，我们也会尝试训练图神经网络进行图谱补全，进一步完善图谱中缺失的顶点和边的数据。

***

## 食物营养图谱的特点

食物营养图谱的特点及优势有如下几个方面：

\1. 食物营养图谱在很大程度上具备了膳食建议的数据。针对可能出现的场景，如减肥人群，糖尿病人群，感冒症状等，都会有相关的食物，基础食材，食物类型与营养素与其相连，包含该场景下适宜和不适宜的顶点对象。甚至在某些数据上可以实现一种食物相关的疾病，人群，以及基础食材，营养素，食物类型的一组较完备的数据体现在图谱中，基本能够保证营养逻辑下的全面性与多元性。

\2. 顶点数据属性较为完备。对于食物顶点，当前相关属性个数多达60个，其中包含碳水化合物，脂肪，蛋白质，微量元素等属性；对于疾病顶点，当前相关属性个数多达20个左右，其中包含疾病介绍，就诊科室，传播途径等属性等。顶点丰富的属性内容能够支撑智能问答和个性化推荐的数据基础，将顶点数据多个角度的内容展示在用户面前，以供用户在选择时参考。

\3. 图谱的边都带有指向，能够直接反映出实体关系。针对某个场景来说，一种食物是否选取，即该食物是否有益于该场景，是直接标注在边上的。在食物营养图谱的后续应用上，开发者能够直接获取边的名称来确定推荐实体和场景实体的二元语义关系，在最终的查询返回结果中不需要访问其属性就轻松实现场景下的食物价值判断，有效节约了大部分计算与处理过程。

***

## 食物营养图谱的应用

食物营养图谱的应用有如下几个方向：

\1. 基于食物营养图谱的智能问答是现在自然语言处理中比较常见的一个应用。根据用户提出的专业问题，解析为图谱中的查询语句，最后将查询的结果进行语言组织后返回给用户。在需求分析中，常常会遇到用户提出诸如“苹果能不能不吃”，“减肥期间不能吃什么食物”这类的问题。针对这类问题，根据我们已经构建好的图谱数据，在对问题进行意图识别的基础之上，返回用户问题中已知实体信息的相关内容，通过文本组合生成问题的答案返回给用户。

\2. 食物营养图谱的食物顶点主要面向各种菜肴，那么丰富的顶点及其属性就可以支持食物推荐。通过分析用户自定义的食物偏好结果，我们可以从食物营养图谱中获取满足偏好设置的食物数据，根据一天当中三餐营养素的配比进行组合，并能够为用户生成健康的，符合用户需求的三餐食谱。

\3. 食物营养图谱还能助力公司内部员工培训，为客服人员和用户运营人员提供专业知识保障。根据图谱查询结果能够再组织成用于检索相关专业知识的知识查询工具，辅助对外的客服和运营人员在线为用户答疑解惑。